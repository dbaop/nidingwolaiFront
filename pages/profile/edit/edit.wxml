<!-- edit.wxml -->
<view class="container">
  <!-- 头像部分 -->
  <view class="avatar-section">
    <view class="avatar-container" bindtap="chooseAvatar">
      <image class="avatar" src="{{userInfo.avatar || '/images/avatar.png'}}"></image>
      <view class="avatar-edit">
        <image src="/images/edit.png"></image>
        <text>点击更换</text>
      </view>
    </view>
  </view>

  <!-- 表单部分 -->
  <view class="form-section">
    <!-- 昵称 -->
    <view class="form-item">
      <view class="form-label">昵称</view>
      <input class="form-input" placeholder="请输入昵称" value="{{userInfo.nickname}}" bindinput="onNicknameInput" maxlength="20" />
    </view>

    <!-- 性别 -->
    <view class="form-item">
      <view class="form-label">性别</view>
      <radio-group class="radio-group" bindchange="onGenderChange">
        <label class="radio-item" wx:for="{{[{name: '男', value: 1}, {name: '女', value: 2}]}}" wx:key="value">
          <radio value="{{item.value}}" checked="{{userInfo.gender === item.value}}" />
          <text>{{item.name}}</text>
        </label>
      </radio-group>
    </view>

    <!-- 生日 -->
    <view class="form-item">
      <view class="form-label">生日</view>
      <picker mode="date" value="{{userInfo.birthday}}" bindchange="onBirthdayChange">
        <view class="picker-view">
          {{userInfo.birthday || '请选择生日'}}
        </view>
      </picker>
    </view>

    <!-- 手机号 -->
    <view class="form-item">
      <view class="form-label">手机号</view>
      <input class="form-input" placeholder="请输入手机号" value="{{userInfo.phone}}" bindinput="onPhoneInput" type="number" maxlength="11" />
    </view>

    <!-- 邮箱 -->
    <view class="form-item">
      <view class="form-label">邮箱</view>
      <input class="form-input" placeholder="请输入邮箱" value="{{userInfo.email}}" bindinput="onEmailInput" />
    </view>

    <!-- 个人简介 -->
    <view class="form-item">
      <view class="form-label">个人简介</view>
      <textarea class="form-textarea" placeholder="介绍一下自己吧" value="{{userInfo.intro}}" bindinput="onIntroInput" maxlength="200" />
      <view class="char-count">{{userInfo.intro.length}}/200</view>
    </view>
  </view>

  <!-- 按钮部分 -->
  <view class="button-section">
    <button class="reset-btn" bindtap="resetForm">重置</button>
    <button class="save-btn {{hasChanges ? 'active' : ''}}" bindtap="saveProfile" loading="{{loading}}" disabled="{{!hasChanges || loading}}">
      保存
    </button>
  </view>
</view>